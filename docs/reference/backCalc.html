<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Back-calculate length at previous ages from standard data format. — backCalc • RFishBC</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Back-calculate length at previous ages from standard data format. — backCalc"><meta property="og:description" content="Back-calculates length at previous ages from a data.frame that was primarily created from combineData and digitizeRadii. One of several back-calculation models, described in bcFuns and Vigliola and Meekan (2009), can be used. Parameter estimates from various models of fish length on structure radius or structure radius on fish length are computed internally and used in the back-calculations. This function is intended to make back-calculation of fish length at previous ages as streamlined as possible."><meta property="og:image" content="https://fishr-core-team.github.io/RFishBC/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RFishBC</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/BCIntro.html">Short Introduction</a>
    </li>
    <li>
      <a href="../articles/collectRadiiData.html">Collect Radii Data</a>
    </li>
    <li>
      <a href="../articles/seeRadiiData.html">Visualize Radii Data</a>
    </li>
    <li>
      <a href="../articles/BCCalc.html">Back-Calculating Lengths</a>
    </li>
    <li>
      <a href="../articles/BCWorkflow.html">Suggested Workflow</a>
    </li>
    <li>
      <a href="../articles/Other.html">Other Features</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-2x"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/fishR-Core-Team/RFishBC" class="external-link">
    <span class="fa fa-github fa-2x"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Back-calculate length at previous ages from standard data format.</h1>
    <small class="dont-index">Source: <a href="https://github.com/fishR-Core-Team/RFishBC/blob/HEAD/R/backCalc.R" class="external-link"><code>R/backCalc.R</code></a></small>
    <div class="hidden name"><code>backCalc.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Back-calculates length at previous ages from a data.frame that was primarily created from <code><a href="combineData.html">combineData</a></code> and <code><a href="digitizeRadii.html">digitizeRadii</a></code>. One of several back-calculation models, described in <code><a href="bcFuns.html">bcFuns</a></code> and Vigliola and Meekan (2009), can be used. Parameter estimates from various models of fish length on structure radius or structure radius on fish length are computed internally and used in the back-calculations. This function is intended to make back-calculation of fish length at previous ages as streamlined as possible.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">backCalc</span><span class="op">(</span></span>
<span>  <span class="va">dat</span>,</span>
<span>  <span class="va">lencap</span>,</span>
<span>  <span class="va">BCM</span>,</span>
<span>  <span class="va">inFormat</span>,</span>
<span>  outFormat <span class="op">=</span> <span class="va">inFormat</span>,</span>
<span>  a <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  L0p <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  R0p <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  L0 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  R0 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  deletePlusGrowth <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  digits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"digits"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>dat</dt>
<dd><p>A data.frame created with <code><a href="combineData.html">combineData</a></code> that MUST have at least the length-at-capture appended as a variable. See Details.</p></dd>


<dt>lencap</dt>
<dd><p>The unquoted name of the length-at-capture variable.</p></dd>


<dt>BCM</dt>
<dd><p>A single numeric between 1 and 22 or a string that indicates which model to use (based on numbers and names in Vigliola and Meekan (2009)). See Details in <code><a href="bcFuns.html">bcFuns</a></code> for the list of available models.</p></dd>


<dt>inFormat</dt>
<dd><p>The format of the data in <code>dat</code>. The two choices are <code>"long"</code> with one radial measurement per line (and all radial measurements for a fish in separate rows) and <code>"wide"</code> with one fish per line (and all radial measurements in separate variables). Defaults to <code>"long"</code>.</p></dd>


<dt>outFormat</dt>
<dd><p>The format for the returned data.frame. Choices are as described for <code>inFormat</code>. Defaults to be the same as <code>inFormat</code>.</p></dd>


<dt>a</dt>
<dd><p>The fish length when the structure first forms as used in the Fraser-Lee model (i.e., <code>BCM=1</code> or <code>BCM="FRALE"</code>). If this is missing then <code>a</code> will be estimated as the intercept from the fish length on structure radius linear regression.</p></dd>


<dt>L0p</dt>
<dd><p>The length at the “Biological Intercept” point. Only used in the “Biological Intercept” (<code>BCM=3</code>), “Watanabe and Kuroki” (<code>BCM=12</code>), and “Modified Fry” (<code>BCM=14</code>) models.</p></dd>


<dt>R0p</dt>
<dd><p>The stucture radius at the “Biological Intercept” point. Only used in the “Biological Intercept” (<code>BCM=3</code>), “Watanabe and Kuroki” (<code>BCM=12</code>), and “Modified Fry” (<code>BCM=14</code>) models.</p></dd>


<dt>L0</dt>
<dd><p>The length at the arbitrarily selected point in the “Fry” (<code>BCM=13</code>) model.</p></dd>


<dt>R0</dt>
<dd><p>The structure radius at the arbitrarily selected point in the “Fry” (<code>BCM=13</code>) model.</p></dd>


<dt>deletePlusGrowth</dt>
<dd><p>A logical that indicates whether the radial measurement that corresponds to “plus-growth” on the structure should be deleted (<code>TRUE</code>; Default) or not (<code>FALSE</code>).</p></dd>


<dt>digits</dt>
<dd><p>Number of digits to which the back-calculated lengths should be rounded. Defaults to the value returned by <code>getOptions("digits")</code>, which is generally 7 digits.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A data.frame similar to <code>dat</code> but with the radial measurements replaced by back-calculated lengths at previous ages.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Get some data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">SMBassWB1</span>,package<span class="op">=</span><span class="st">"RFishBC"</span><span class="op">)</span> <span class="co">## fish data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">SMBassWB2</span>,package<span class="op">=</span><span class="st">"RFishBC"</span><span class="op">)</span> <span class="co">## rad data</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Simplify to 3 fish so we can see what is going on</span></span></span>
<span class="r-in"><span><span class="va">tmp1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">SMBassWB1</span>,<span class="va">id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">377</span>,<span class="fl">378</span>,<span class="fl">379</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tmp2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">SMBassWB2</span>,<span class="va">id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">377</span>,<span class="fl">378</span>,<span class="fl">379</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Combine data frames to form a wide data frame (i.e., a left join)</span></span></span>
<span class="r-in"><span><span class="va">wdat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">tmp1</span>,<span class="va">tmp2</span>,by<span class="op">=</span><span class="st">"id"</span>,all.x<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wdat1</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    id species lake gear yearcap lencap reading agecap  radcap    rad1    rad2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 377     SMB   WB    E    1990    244     DHO      7 7.32901 1.14855 2.40505</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 378     SMB   WB    E    1990    205     DHO      6 5.68903 1.44620 2.30517</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 379     SMB   WB    E    1990    117     DHO      2 3.05503 1.59628 3.05503</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      rad3    rad4    rad5    rad6    rad7 rad8 rad9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 3.43185 4.32332 5.25482 6.36840 7.32901   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 3.24254 4.23761 4.91082 5.68903      NA   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      NA      NA      NA      NA      NA   NA   NA</span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="co"># Make a long data frame for examples (remove annuli with NA rads)</span></span></span>
<span class="r-in"><span><span class="va">ldat1</span> <span class="op">&lt;-</span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="va">wdat1</span>,<span class="va">rad1</span><span class="op">:</span><span class="va">rad9</span>,names_to<span class="op">=</span><span class="st">"ann"</span>,names_prefix<span class="op">=</span><span class="st">"rad"</span>,</span></span>
<span class="r-in"><span>                             values_to<span class="op">=</span><span class="st">"rad"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ldat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">ldat1</span>,<span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">rad</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ldat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">ldat1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ldat1</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     id species lake gear yearcap lencap reading agecap  radcap ann     rad</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  377     SMB   WB    E    1990    244     DHO      7 7.32901   1 1.14855</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  377     SMB   WB    E    1990    244     DHO      7 7.32901   2 2.40505</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  377     SMB   WB    E    1990    244     DHO      7 7.32901   3 3.43185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  377     SMB   WB    E    1990    244     DHO      7 7.32901   4 4.32332</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  377     SMB   WB    E    1990    244     DHO      7 7.32901   5 5.25482</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  377     SMB   WB    E    1990    244     DHO      7 7.32901   6 6.36840</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  377     SMB   WB    E    1990    244     DHO      7 7.32901   7 7.32901</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  378     SMB   WB    E    1990    205     DHO      6 5.68903   1 1.44620</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  378     SMB   WB    E    1990    205     DHO      6 5.68903   2 2.30517</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 378     SMB   WB    E    1990    205     DHO      6 5.68903   3 3.24254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 378     SMB   WB    E    1990    205     DHO      6 5.68903   4 4.23761</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 378     SMB   WB    E    1990    205     DHO      6 5.68903   5 4.91082</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 378     SMB   WB    E    1990    205     DHO      6 5.68903   6 5.68903</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 379     SMB   WB    E    1990    117     DHO      2 3.05503   1 1.59628</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 379     SMB   WB    E    1990    117     DHO      2 3.05503   2 3.05503</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Back-calculate using Dahl-Lea method</span></span></span>
<span class="r-in"><span><span class="co"># wide in and wide out</span></span></span>
<span class="r-in"><span><span class="va">wwres1</span> <span class="op">&lt;-</span> <span class="fu">backCalc</span><span class="op">(</span><span class="va">wdat1</span>,<span class="va">lencap</span>,BCM<span class="op">=</span><span class="st">"DALE"</span>,inFormat<span class="op">=</span><span class="st">"wide"</span>,digits<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Using the Dahl-Lea model.</span>
<span class="r-in"><span><span class="va">wwres1</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 × 15</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      id species lake  gear  yearcap lencap reading agecap  len1  len2  len3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>   377 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    244 DHO          7    38    80   114</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>   378 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    205 DHO          6    52    83   117</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>   379 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    117 DHO          2    61   117    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 4 more variables: len4 &lt;dbl&gt;, len5 &lt;dbl&gt;, len6 &lt;dbl&gt;, len7 &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># wide in and long out</span></span></span>
<span class="r-in"><span><span class="va">wlres1</span> <span class="op">&lt;-</span> <span class="fu">backCalc</span><span class="op">(</span><span class="va">wdat1</span>,<span class="va">lencap</span>,BCM<span class="op">=</span><span class="st">"DALE"</span>,inFormat<span class="op">=</span><span class="st">"wide"</span>,</span></span>
<span class="r-in"><span>                   outFormat<span class="op">=</span><span class="st">"long"</span>,digits<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Using the Dahl-Lea model.</span>
<span class="r-in"><span><span class="va">wlres1</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 15 × 10</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       id species lake  gear  yearcap lencap reading agecap   ann bclen</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>   377 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    244 DHO          7     1    38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>   377 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    244 DHO          7     2    80</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>   377 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    244 DHO          7     3   114</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>   377 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    244 DHO          7     4   144</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>   377 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    244 DHO          7     5   175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>   377 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    244 DHO          7     6   212</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>   377 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    244 DHO          7     7   244</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>   378 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    205 DHO          6     1    52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>   378 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    205 DHO          6     2    83</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>   378 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    205 DHO          6     3   117</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span>   378 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    205 DHO          6     4   153</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span>   378 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    205 DHO          6     5   177</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span>   378 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    205 DHO          6     6   205</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span>   379 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    117 DHO          2     1    61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span>   379 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    117 DHO          2     2   117</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># long in and wide out</span></span></span>
<span class="r-in"><span><span class="va">lwres1</span> <span class="op">&lt;-</span> <span class="fu">backCalc</span><span class="op">(</span><span class="va">ldat1</span>,<span class="va">lencap</span>,BCM<span class="op">=</span><span class="st">"DALE"</span>,inFormat<span class="op">=</span><span class="st">"long"</span>,digits<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Using the Dahl-Lea model.</span>
<span class="r-in"><span><span class="va">lwres1</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     id species lake gear yearcap lencap reading agecap ann bclen</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  377     SMB   WB    E    1990    244     DHO      7   1    38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  377     SMB   WB    E    1990    244     DHO      7   2    80</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  377     SMB   WB    E    1990    244     DHO      7   3   114</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  377     SMB   WB    E    1990    244     DHO      7   4   144</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  377     SMB   WB    E    1990    244     DHO      7   5   175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  377     SMB   WB    E    1990    244     DHO      7   6   212</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  377     SMB   WB    E    1990    244     DHO      7   7   244</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  378     SMB   WB    E    1990    205     DHO      6   1    52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  378     SMB   WB    E    1990    205     DHO      6   2    83</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 378     SMB   WB    E    1990    205     DHO      6   3   117</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 378     SMB   WB    E    1990    205     DHO      6   4   153</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 378     SMB   WB    E    1990    205     DHO      6   5   177</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 378     SMB   WB    E    1990    205     DHO      6   6   205</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 379     SMB   WB    E    1990    117     DHO      2   1    61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 379     SMB   WB    E    1990    117     DHO      2   2   117</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># wide in and long out</span></span></span>
<span class="r-in"><span><span class="va">llres1</span> <span class="op">&lt;-</span> <span class="fu">backCalc</span><span class="op">(</span><span class="va">ldat1</span>,<span class="va">lencap</span>,BCM<span class="op">=</span><span class="st">"DALE"</span>,inFormat<span class="op">=</span><span class="st">"long"</span>,</span></span>
<span class="r-in"><span>                   outFormat<span class="op">=</span><span class="st">"long"</span>,digits<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Using the Dahl-Lea model.</span>
<span class="r-in"><span><span class="va">llres1</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     id species lake gear yearcap lencap reading agecap ann bclen</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  377     SMB   WB    E    1990    244     DHO      7   1    38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  377     SMB   WB    E    1990    244     DHO      7   2    80</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  377     SMB   WB    E    1990    244     DHO      7   3   114</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  377     SMB   WB    E    1990    244     DHO      7   4   144</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  377     SMB   WB    E    1990    244     DHO      7   5   175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  377     SMB   WB    E    1990    244     DHO      7   6   212</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  377     SMB   WB    E    1990    244     DHO      7   7   244</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  378     SMB   WB    E    1990    205     DHO      6   1    52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  378     SMB   WB    E    1990    205     DHO      6   2    83</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 378     SMB   WB    E    1990    205     DHO      6   3   117</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 378     SMB   WB    E    1990    205     DHO      6   4   153</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 378     SMB   WB    E    1990    205     DHO      6   5   177</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 378     SMB   WB    E    1990    205     DHO      6   6   205</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 379     SMB   WB    E    1990    117     DHO      2   1    61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 379     SMB   WB    E    1990    117     DHO      2   2   117</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Situation with no radial measurements for some fish</span></span></span>
<span class="r-in"><span><span class="co"># Create an extra fish with length (tmp1) but no rad</span></span></span>
<span class="r-in"><span><span class="va">tmp1a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">tmp1</span>,</span></span>
<span class="r-in"><span>               <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id<span class="op">=</span><span class="fl">999</span>,</span></span>
<span class="r-in"><span>               species<span class="op">=</span><span class="st">"SMB"</span>,lake<span class="op">=</span><span class="st">"WB"</span>,gear<span class="op">=</span><span class="st">"E"</span>,</span></span>
<span class="r-in"><span>               yearcap<span class="op">=</span><span class="fl">1990</span>,lencap<span class="op">=</span><span class="fl">225</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wdat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">tmp1a</span>,<span class="va">tmp2</span>,by<span class="op">=</span><span class="st">"id"</span>,all.x<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wdat2</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    id species lake gear yearcap lencap reading agecap  radcap    rad1    rad2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 377     SMB   WB    E    1990    244     DHO      7 7.32901 1.14855 2.40505</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 378     SMB   WB    E    1990    205     DHO      6 5.68903 1.44620 2.30517</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 379     SMB   WB    E    1990    117     DHO      2 3.05503 1.59628 3.05503</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 999     SMB   WB    E    1990    225    &lt;NA&gt;     NA      NA      NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      rad3    rad4    rad5    rad6    rad7 rad8 rad9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 3.43185 4.32332 5.25482 6.36840 7.32901   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 3.24254 4.23761 4.91082 5.68903      NA   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      NA      NA      NA      NA      NA   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      NA      NA      NA      NA      NA   NA   NA</span>
<span class="r-in"><span>                </span></span>
<span class="r-in"><span><span class="co"># wide in and wide out</span></span></span>
<span class="r-in"><span><span class="va">wwres2</span> <span class="op">&lt;-</span> <span class="fu">backCalc</span><span class="op">(</span><span class="va">wdat2</span>,<span class="va">lencap</span>,BCM<span class="op">=</span><span class="st">"DALE"</span>,inFormat<span class="op">=</span><span class="st">"wide"</span>,digits<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Using the Dahl-Lea model.</span>
<span class="r-in"><span><span class="va">wwres2</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 × 15</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      id species lake  gear  yearcap lencap reading agecap  len1  len2  len3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>   377 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    244 DHO          7    38    80   114</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>   378 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    205 DHO          6    52    83   117</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>   379 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    117 DHO          2    61   117    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>   999 SMB     WB    E        <span style="text-decoration: underline;">1</span>990    225 <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 4 more variables: len4 &lt;dbl&gt;, len5 &lt;dbl&gt;, len6 &lt;dbl&gt;, len7 &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="http://derekogle.com" class="external-link">Derek H. Ogle</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

